<!DOCTYPE html>
<html lang="en">
<head>
    <!-- head content -->
    <title>Generate Workout</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/static/css/generate_workout.css">
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body class="bg-light">
<header class="bg-primary text-white text-center py-4">
    <h1>Generate a Custom Workout</h1>
</header>

<main class="container my-5">
    <div id="generate-workout-input" class="card mx-auto shadow-lg" style="max-width: 600px;">
        <div class="card-body">
            <h2 class="card-title text-center mb-4">Customize Your Workout</h2>
            <form action="/generate_workout" method="POST" onsubmit="showLoading()">

                <!-- Sex Input -->
                <div class="mb-3">
                    <label for="sex" class="form-label">Sex</label>
                    <select name="sex" id="sex" class="form-select" required>
                        <option value="">-- Select --</option>
                        <option value="male"
                                {% if user and user.sex == 'male' %}selected{% endif %}>Male
                        </option>
                        <option value="female"
                                {% if user and user.sex == 'female' %}selected{% endif %}>Female
                        </option>
                    </select>
                </div>

                <!-- Bodyweight Input -->
                <div class="mb-3">
                    <label for="weight" class="form-label">Bodyweight (kg)</label>
                    <input type="number" id="weight" name="weight"
                           class="form-control" required
                           value="{{ user.bodyweight if user else '' }}"
                           step="0.1"
                           placeholder="Enter your weight">
                </div>

                <!-- Gym Experience Input -->
                <div class="mb-3">
                    <label for="gymexp" class="form-label">Gym Experience</label>
                    <select name="gymexp" id="gymexp" class="form-select" required>
                        <option value="">-- Select --</option>
                        <option value="beginner"
                                {% if user and user.gym_experience == 'beginner' %}selected{% endif %}>
                            Beginner
                        </option>
                        <option value="intermediate"
                                {% if user and user.gym_experience == 'intermediate' %}selected{% endif %}>
                            Intermediate
                        </option>
                        <option value="advanced"
                                {% if user and user.gym_experience == 'advanced' %}selected{% endif %}>
                            Advanced
                        </option>
                        <option value="expert"
                                {% if user and user.gym_experience == 'expert' %}selected{% endif %}>
                            Expert
                        </option>
                    </select>
                </div>

                <!-- Workout Focus -->
                <div class="mb-3">
                    <label for="target" class="form-label">Workout Focus</label>
                    <input type="text" id="target" name="target"
                           class="form-control" required
                           placeholder="e.g., upper body, legs">
                </div>

                <!-- Workout Goal/Style -->
                <div class="mb-3">
                    <label for="goal" class="form-label">Workout Goal</label>
                    <select name="goal" id="goal" class="form-select" required>
                        <option value="">-- Select --</option>
                        <option value="muscle_growth"
                                {% if user and user.workout_goal == 'muscle_growth' %}selected{% endif %}>Muscle Growth</option>
                        <option value="strength"
                                {% if user and user.workout_goal == 'strength' %}selected{% endif %}>Strength</option>
                        <option value="cardio"
                                {% if user and user.workout_goal == 'cardio' %}selected{% endif %}>Cardio / Endurance</option>
                        <option value="weight_loss"
                                {% if user and user.workout_goal == 'weight_loss' %}selected{% endif %}>Weight Loss</option>
                        <option value="general_fitness"
                                {% if user and user.workout_goal == 'general_fitness' or not user or not user.workout_goal %}selected{% endif %}>General Fitness</option>
                    </select>
                </div>

                <!-- Restrictions -->
                <div class="mb-3">
                    <label for="restrictions" class="form-label">Restrictions (optional)</label>
                    <textarea id="restrictions" name="restrictions"
                              class="form-control" rows="2"
                              placeholder="e.g., knee injury - avoid squats, no overhead movements"></textarea>
                    <small class="text-muted">Mention any injuries, limitations, or movements/muscle groups to avoid</small>
                </div>

                <div class="text-center">
                    <button type="submit" class="btn btn-success w-100">Generate Workout</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Go Back Button -->
    <div class="go-back-container">
        <button class="btn btn-secondary go-back-button" onclick="location.href='/'">Go Back</button>
    </div>
</main>

<!-- Loading Spinner -->
<div id="loadingSpinner" style="display: none;">
    <div class="spinner"></div>
    <p>Customizing your workout...</p>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
    function showLoading() {
        document.getElementById('loadingSpinner').style.display = 'block';
        document.getElementById('generate-workout-input').style.display = 'none';
    }
</script>
</body>
</html>